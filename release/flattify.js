!function t(i,a,o){function n(s,r){if(!a[s]){if(!i[s]){var h="function"==typeof require&&require;if(!r&&h)return h(s,!0);if(e)return e(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=a[s]={exports:{}};i[s][0].call(l.exports,function(t){var a=i[s][1][t];return n(a?a:t)},l,l.exports,t,i,a,o)}return a[s].exports}for(var e="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(t,i,a){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function t(t,i){for(var a=0;a<i.length;a++){var o=i[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,a,o){return a&&t(i.prototype,a),o&&t(i,o),i}}(),e=4,s=function(){function t(i){return o(this,t),i?(this._imgData=i,this.height=i.height,this.width=i.width,void(this.imgMatrix=[])):!1}return n(t,[{key:"init",value:function(t){this.background=t||{r:0,g:0,b:0,a:0},this.imgDataToMatrix(),this.flagBackgroundPixels()}},{key:"matrixToImgData",value:function(){for(var t=0,i=0;i<this.imgMatrix.length;i++)for(var a=0;a<this.imgMatrix[i].length;a++)this._imgData.data[t]=this.imgMatrix[i][a].r,this._imgData.data[t+1]=this.imgMatrix[i][a].g,this._imgData.data[t+2]=this.imgMatrix[i][a].b,this._imgData.data[t+3]=this.imgMatrix[i][a].a,t+=e}},{key:"imgDataToMatrix",value:function(){for(var t=0;t<this.height;t++){for(var i=[],a=0;a<this.width*e;a+=e)i.push(this.getPixelFromImgData(t,a));this.imgMatrix.push(i)}}},{key:"setShadowPixelRight",value:function(t,i,a){this.imgMatrix[t+a][i+a].r=this.background.r-50,this.imgMatrix[t+a][i+a].g=this.background.g-50,this.imgMatrix[t+a][i+a].b=this.background.b-50,this.imgMatrix[t+a][i+a].a=this.background.a}},{key:"setShadowPixelLeft",value:function(t,i,a){this.imgMatrix[t+a][i-a].r=this.background.r-50,this.imgMatrix[t+a][i-a].g=this.background.g-50,this.imgMatrix[t+a][i-a].b=this.background.b-50,this.imgMatrix[t+a][i-a].a=this.background.a}},{key:"getPixelFromImgData",value:function(t,i){var a={};return a.r=this._imgData.data[i+t*this.width*e],a.g=this._imgData.data[i+1+t*this.width*e],a.b=this._imgData.data[i+2+t*this.width*e],a.a=this._imgData.data[i+3+t*this.width*e],a}},{key:"shadowfyRight",value:function(){for(var t=0;t<this.imgMatrix.length;t++)for(var i=0;i<this.imgMatrix[t].length;i++)if(this.imgMatrix[t][i].isBackground===!1)for(var a=1;a+t<this.imgMatrix.length&&a+i<this.imgMatrix[t+a].length;a++)this.imgMatrix[t+a][i+a].isBackground===!0&&this.setShadowPixelRight(t,i,a)}},{key:"shadowfyLeft",value:function(){for(var t=this.imgMatrix.length-1;t>0;t--)for(var i=this.imgMatrix.length-1;i>0;i--)if(this.imgMatrix[t][i].isBackground===!1)for(var a=1;i-a>0&&a+t<this.imgMatrix.length&&a+i<this.imgMatrix[t+a].length;a++)this.imgMatrix[t+a][i-a].isBackground===!0&&this.setShadowPixelLeft(t,i,a)}},{key:"halfMaterial",value:function(t){for(var i=-20,a=259*(i+255)/(255*(259-i)),o=0;o<this.imgMatrix.length;o++)for(var n=this.width/2-t/2;n<this.imgMatrix[o].length;n++)this.imgMatrix[o][n].r=a*(this.imgMatrix[o][n].r-128)+128,this.imgMatrix[o][n].g=a*(this.imgMatrix[o][n].g-128)+128,this.imgMatrix[o][n].b=a*(this.imgMatrix[o][n].b-128)+128}},{key:"flagBackgroundPixels",value:function(){for(var t=0;t<this.imgMatrix.length;t++)for(var i=0;i<this.imgMatrix[t].length;i++)this.isPixelEqual(this.imgMatrix[t][i],this.background)===!0?this.imgMatrix[t][i].isBackground=!0:255===this.imgMatrix[t][i].a&&(this.imgMatrix[t][i].isBackground=!1)}},{key:"reloadColors",value:function(t,i){console.log(t),console.log(i);for(var a=0;a<this.imgMatrix.length;a++)for(var o=0;o<this.imgMatrix[a].length;o++)this.isAlmostEqual(this.imgMatrix[a][o],t,10)&&(this.imgMatrix[a][o].r=i.r,this.imgMatrix[a][o].g=i.g,this.imgMatrix[a][o].b=i.b,this.imgMatrix[a][o].a=i.a)}},{key:"isAlmostEqual",value:function(t,i,a){return Math.abs(t.r-i.r)<a&&Math.abs(t.g-i.g)<a&&Math.abs(t.b-i.b)<a?!0:!1}},{key:"isPixelEqual",value:function(t,i){return t.r==i.r&&t.g==i.g&&t.b==i.b&&t.a==i.a}},{key:"imgData",get:function(){return this.matrixToImgData(),this._imgData}}]),t}();a["default"]=s},{}],2:[function(t,i,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,i){for(var a=0;a<i.length;a++){var o=i[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,a,o){return a&&t(i.prototype,a),o&&t(i,o),i}}(),r=t("./ImgCanvas"),h=o(r),l=function(){function t(i,a,o){if(n(this,t),this.canvas=document.getElementById(i),this.icon=document.getElementById(a),this.options={margin:Math.max(this.icon.height,this.icon.width)/2,backgroundColor:{r:0,g:184,b:255,a:255},selectedColor:null,shape:"circle",radius:null,shadow:1},"object"===("undefined"==typeof o?"undefined":e(o)))for(var s in o)o.hasOwnProperty(s)&&(this.options[s]=o[s])}return s(t,[{key:"init",value:function(){var t=void 0;switch(this.width=parseInt(this.icon.width)+this.options.margin,this.height=parseInt(this.icon.height)+this.options.margin,this.ctx=this.canvas.getContext("2d"),this.canvas.height=this.icon.height+this.options.margin,this.canvas.width=this.icon.width+this.options.margin,this.initBackground(),this.ctx.drawImage(this.icon,this.options.margin/2,this.options.margin/2),t=this.ctx.getImageData(0,0,this.height+this.options.margin,this.width+this.options.margin),this.iconCanvas=new h["default"](t),this.iconCanvas.init(this.options.backgroundColor),this.options.shadow){case 1:this.iconCanvas.shadowfyRight();break;case 2:this.iconCanvas.halfMaterial(this.options.margin);break;case 3:this.iconCanvas.shadowfyLeft();break;case 0:}this.ctx.putImageData(this.iconCanvas.imgData,0,0)}},{key:"initBackground",value:function(){var t=this.canvas.width/2,i=this.canvas.height/2,a=20,o=this.options.radius||Math.max(this.icon.height,this.icon.width)-this.icon.height/4,n="rgba("+this.options.backgroundColor.r+","+this.options.backgroundColor.g+","+this.options.backgroundColor.b+",1)";this.ctx.fillStyle=n,this.ctx.strokeStyle=n,this.ctx.beginPath(),"rect"===this.options.shape?(console.log(this.options.margin),this.ctx.rect(0,0,this.canvas.height+this.options.margin,this.canvas.width+this.options.margin,!1)):"round-rect"===this.options.shape?(this.ctx.lineJoin="round",this.ctx.lineWidth=a,this.ctx.strokeRect(0+a/2,0+a/2,this.canvas.width-a,this.canvas.height-a),this.ctx.fillRect(0+a/2,0+a/2,this.canvas.width-a,this.canvas.height-a)):"circle"===this.options.shape?this.ctx.arc(t,i,o,0,2*Math.PI,!1):"hexagone"===this.options.shape&&this.drawPolygone(6,t,i,o),this.ctx.fill()}},{key:"setMargin",value:function(t){this.options.radius=t-this.icon.height/4,this.options.margin=t}},{key:"getRadius",value:function(){return this.options.radius||Math.max(this.icon.height,this.icon.width)-this.icon.height/4}},{key:"setRadius",value:function(t){this.options.radius=t}},{key:"setBackgroundShape",value:function(t){"string"==typeof t&&t.length>0&&(this.options.shape=t)}},{key:"setBackgroundColor",value:function(t){var i=this.hexToRgb(t);return this.isValidPixel(i)===!1?(console.error("invalid color"),!1):void(this.options.backgroundColor=i)}},{key:"reloadCanvas",value:function(t){var i=void 0,a=0,o=0;switch(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.height=this.icon.height+this.options.margin,this.canvas.width=this.icon.width+this.options.margin,this.initBackground(),this.ctx.drawImage(this.icon,this.options.margin/2+a,this.options.margin/2+o),i=this.ctx.getImageData(0,0,this.height+this.options.margin,this.width+this.options.margin),t===!0&&(this.iconCanvas=new h["default"](i)),this.iconCanvas.init(this.options.backgroundColor),this.options.shadow){case 1:this.iconCanvas.shadowfyRight();break;case 2:this.iconCanvas.halfMaterial(this.options.margin);break;case 3:this.iconCanvas.shadowfyLeft();break;case 0:}this.ctx.putImageData(this.iconCanvas.imgData,0,0)}},{key:"hexToRgb",value:function(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16),a:255}:null}},{key:"rgbaToPixel",value:function(t){var i=t.replace("rgba(","").replace(")","").split(",");return{r:parseInt(i[0]),g:parseInt(i[1]),b:parseInt(i[2]),a:255}}},{key:"isValidPixel",value:function(t){var i=0;if("object"!==("undefined"==typeof t?"undefined":e(t)))return!1;for(var a in t)if(i++,"number"!=typeof t[a]||t[a]>255||t[a]<0)return!1;return 4!=i?!1:!0}},{key:"selectColor",value:function(t){return this.isValidPixel(t)===!1?(console.error("Invalid color !! ",c),!1):void(this.options.selectedColor=t)}},{key:"reloadColors",value:function(t){var i=this.hexToRgb(t);return this.isValidPixel(i)===!1?(console.error("invalid color"),!1):void this.iconCanvas.reloadColors(this.options.selectedColor,i)}},{key:"drawPolygone",value:function(t,i,a,o){this.ctx.beginPath(),this.ctx.moveTo(i+o*Math.cos(0),a+o*Math.sin(0));for(var n=1;t>=n;n+=1)this.ctx.lineTo(i+o*Math.cos(2*n*Math.PI/t),a+o*Math.sin(2*n*Math.PI/t));this.ctx.lineWidth=1,this.ctx.stroke()}},{key:"setShadow",value:function(t){this.options.shadow=t}},{key:"toDataURL",value:function(){return this.canvas.toDataURL("image/png")}}]),t}();a["default"]=l},{"./ImgCanvas":1}],3:[function(t,i,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function n(t){$("#toggle-one").bootstrapToggle().change(function(){$(this).prop("checked")===!0?(t.setShadow(1),t.reloadCanvas(!0)):(t.setShadow(0),t.reloadCanvas(!0))});var i=new Slider("#padding-slider",{});i.on("slide",function(i){t.setMargin(i),t.reloadCanvas(!0)}),i.setValue(200),$(".demo2").colorpicker({customClass:"colorpicker-2x",sliders:{saturation:{maxLeft:200,maxTop:200},hue:{maxTop:200},alpha:{maxTop:200}}}).on("changeColor.colorpicker",function(i){t.setBackgroundColor(i.color.toHex()),t.reloadCanvas(!0)}),$(".demo3").colorpicker({customClass:"colorpicker-2x",sliders:{saturation:{maxLeft:200,maxTop:200},hue:{maxTop:200},alpha:{maxTop:200}}}).on("changeColor.colorpicker",function(i){t.reloadColors(i.color.toHex()),t.reloadCanvas(!1)})}var e=t("./canvasController"),s=o(e);window.onload=function(){function t(t){var i=0,a=0;if(t.offsetParent){do i+=t.offsetLeft,a+=t.offsetTop,t=t.offsetParent;while(t);return{x:i,y:a}}}function i(t,i,a){if(t>255||i>255||a>255)throw"Invalid color component";return(t<<16|i<<8|a).toString(16)}var a=new s["default"]("canvas","source");a.init(),n(a),document.getElementById("rect").onclick=function(){a.setBackgroundShape("rect"),a.reloadCanvas(!0)},document.getElementById("canvas").onclick=function(o){var n=t(this),e=o.pageX-n.x,s=o.pageY-n.y,r=this.getContext("2d"),h=r.getImageData(e,s,1,1).data;"#"+("000000"+i(h[0],h[1],h[2])).slice(-6);a.selectColor({r:h[0],g:h[1],b:h[2],a:1}),$(".demo3").colorpicker("show")},document.getElementById("circular").onclick=function(){a.setBackgroundShape("circle"),a.reloadCanvas(!0)},document.getElementById("round-rect").onclick=function(){a.setBackgroundShape("round-rect"),a.reloadCanvas(!0)},document.getElementById("colorPicker").onchange=function(){var t=document.getElementById("colorPicker").value;a.setBackgroundColor(t),a.reloadCanvas()},document.getElementById("long-shadow").onclick=function(){a.setShadow(1),a.reloadCanvas(!0)},document.getElementById("long-shadow-left").onclick=function(){a.setShadow(3),a.reloadCanvas(!0)},document.getElementById("half-shadow").onclick=function(){a.setShadow(2),a.reloadCanvas(!0)},document.getElementById("download-canvas").onclick=function(){console.log("dsqds"),this.href=a.toDataURL()},document.getElementById("download-canvas-icon").onclick=function(){this.href=a.toDataURL()}}},{"./canvasController":2}]},{},[3]);